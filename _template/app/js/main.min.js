var ndplComponent=Vue.extend({data:function(){return{loaded:!1,hide_sample_code:!1}},props:{component:{required:!0}},computed:{inline_styles:function(){var o=this,e="";return o.loaded&&(o.component.options.sample_min_height&&(e+="min-height:"+o.component.options.sample_min_height+"px;"),o.component.options.sample_background_color&&(e+="background-color:"+o.component.options.sample_background_color+" !important;")),e}},watch:{"component.html":function(){if(this.component.html.length){var o=this.$el.querySelector("pre code");hljs.highlightBlock(o)}}},ready:function(){var o=this;if(o.$on("loaded",function(){window.addEventListener("scroll",o.updateActive),window.addEventListener("resize",o.updateActive),o.setHideSample(function(){o.loaded=!0})}),o.$on("resizing",function(e){o.loaded=!1,e||o.setHideSample(function(){o.loaded=!0})}),o.component.html){var e=this.$el.querySelector("pre code");hljs.highlightBlock(e)}},methods:{updateActive:function(){var o=this;if(o.$root&&o.$root.scroll_position>=o.$el.offsetTop-60&&o.$root.scroll_position<o.$el.offsetTop+o.$el.offsetHeight)o.$root.scrolling_to||o.isActive(o.component)||(o.$root.active_components.push(o.component),o.$root.open_group=null,o.$root.updateHash(o.component.id));else if(o.$root&&!o.$root.scrolling_to)for(var e=0;e<o.$root.active_components.length;e++){var t=o.$root.active_components[e];if(t.id===o.component.id)return void o.$root.active_components.splice(e,1)}},isActive:function(o){for(var e=this,t=0;t<e.$root.active_components.length;t++){var n=e.$root.active_components[t];if(o.id===n.id)return!0}return!1},shouldInvertText:function(o){var e=this.$root.convertHexToRgb(o),t=this.$root.getColorBrightness(e);return t>210},shouldApplyBorder:function(o){var e=this.$root.convertHexToRgb(o),t=this.$root.getColorBrightness(e);return t>240},setHideSample:function(o){o="undefined"!=typeof o?o:function(){};var e=this;e.hide_sample_code=!1,setTimeout(function(){e.$el.querySelector(".ndpl-component__code")&&(e.$el.querySelector(".ndpl-component__sample").offsetHeight<=74&&!e.component.options.sample_always_show&&(e.hide_sample_code=!0),!e.$root.mobile_view&&e.component.options.sample_min_height&&(e.hide_sample_code=!1)),o()},0)},isCodeVisible:function(){var o=this;return!o.hide_sample_code}}});Vue.component("ndpl-component",ndplComponent);var ndplGroup=Vue.extend({props:{group:{required:!0}}});Vue.component("ndpl-group",ndplGroup);var ndplScript=Vue.extend({props:{script:{required:!0}},methods:{loadTypekit:function(){try{Typekit.load({async:!0})}catch(o){}}}});Vue.component("ndpl-script",ndplScript),new Vue({el:"html",data:{intro:null,project_logo:null,project_favicon:null,project_name:null,project_url:null,copyright_start_year:null,client_name:null,client_url:null,creators:{},content:{},groups:{},theme:{},assets:{css:[],js:[]},font_libraries:{typekit_code:null,google_web_fonts:null,typography_web_fonts:null},log:{error:[],info:[]},components_count:0,groups_count:0,components_loaded_count:0,groups_loaded_count:0,groups_loaded:!1,loaded:!1,resizing:!1,typekit_loaded:!1,scroll_position:0,prev_scroll_position:0,active_group:null,active_components:[],active_page:null,open_group:null,show_first_page_on_load:!1,scrolling_to:!1,sidebar_scrolling:!1,window_outer_width:0,breakpoint:960,mobile_view:!1,open_nav:!1,rtime:new Date(1,1,2e3,12,0,0),timeout:!1,delta:200,version:null},computed:{project:function(){return this.project_name&&this.project_url?'<a href="'+this.project_url+'" target="_blank"><span>'+this.project_name+"</span></a>":this.project_name&&!this.project_url?this.project_name:null},copyright_year:function(){var o=new Date;return o.getFullYear()==this.copyright_start_year?this.copyright_start_year:this.copyright_start_year+" - "+o.getFullYear()},client:function(){return this.client_name&&this.client_url?'<a href="'+this.client_url+'" target="_blank">'+this.client_name+"</a>":this.client_name&&!this.client_url?this.client_name:null},all_creators:function(){var o="";if(this.creators.length&&this.creators[0].name){for(var e=0;e<this.creators.length;e++)prefix=e===this.creators.length-1?" & ":", ",url=this.creators[e].url,name=this.creators[e].name.replace(" ","&nbsp;"),o+=prefix+'<a href="'+url+'" target="_blank">'+name+"</a>";return o.substring(2)}return null},library_inline_styles:function(){var o=this,e="";return o.theme.max_width&&(e+="max-width:"+o.theme.max_width+"px;"),e}},watch:{groups_loaded:function(){var o=this;o.setupComponents()},loaded:function(){var o=this;o.scrollTo(window.location.hash),o.$broadcast("loaded")}},ready:function(){var o=this;o.loadDataFile(),o.window_outer_width=window.outerWidth,o.mobile_view=o.window_outer_width>=o.breakpoint?!1:!0,window.addEventListener("scroll",o.setScrollPosition),window.addEventListener("resize",function(){o.window_outer_width=window.outerWidth,o.setScrollPosition(),o.mobile_view=o.window_outer_width>=o.breakpoint?!1:!0,o.rtime=new Date,o.timeout!==!1||o.mobile_view||(o.timeout=!0,setTimeout(o.resizeFadeToggle,o.delta))});var e=document.querySelector(".ndpl-sidebar");e.addEventListener("mouseover",function(e){o.sidebar_scrolling=!0}),e.addEventListener("mouseleave",function(e){o.sidebar_scrolling=!1}),setTimeout(function(){var e=o.isLoadingPage();e&&o.loadPage(e)},0)},methods:{loadDataFile:function(){var o=this;o.$http.get("./data.json?cb="+new Date).then(function(e){o.initData(e.data,function(){o.$data.groups.length?o.setupGroups():o.logInfo("You need to add a component to your library before it can be loaded.<br/>You can either do this manually by editing your <code>data.json</code> file,<br/> or you can use the command line helper: <code>astrum new [group_name/component_name]</code>")})})},isLoadingPage:function(){var o=this,e=location.hash;if(null!==o.content&&o.content.pages.length)if(e)for(var t=0;t<o.content.pages.length;t++){var n=o.content.pages[t];if(n.name==e.replace("#",""))return n}else if(o.content.show_first_page_on_load)return o.content.pages[0];return!1},initData:function(o,e){e="undefined"!=typeof e?e:function(){};var t=this;for(var n in o)t.$set(n,o[n]);e()},updateHash:function(o){history.pushState?history.pushState(null,null,"#"+o):location.hash=o},setupGroups:function(){for(var o=this,e=0;e<o.groups.length;e++){var t=o.groups[e];o.$set("groups["+e+"].id","group-"+t.name),o.$set("groups["+e+"].active",!1),o.$set("groups["+e+"].description",""),o.groups_count=o.groups.length,o.loadGroup(o.groups[e])}},setupComponents:function(){for(var o=this,e=0;e<o.groups.length;e++){var t=o.groups[e];o.components_count+=t.components.length;for(var n=0;n<t.components.length;n++)o.$set("groups["+e+"].components["+n+"].id","group-"+t.name+"-component-"+t.components[n].name),o.$set("groups["+e+"].components["+n+"].group_id","group-"+t.name),o.$set("groups["+e+"].components["+n+"].active",!1),o.$set("groups["+e+"].components["+n+"].options",t.components[n].options?t.components[n].options:!1),o.$set("groups["+e+"].components["+n+"].options.sample_always_show",t.components[n].options.sample_always_show?t.components[n].options.sample_always_show:!1),o.$set("groups["+e+"].components["+n+"].options.sample_mobile_hidden",t.components[n].options.sample_mobile_hidden?t.components[n].options.sample_mobile_hidden:!1),o.$set("groups["+e+"].components["+n+"].options.sample_dark_background",t.components[n].options.sample_dark_background?t.components[n].options.sample_dark_background:!1),o.$set("groups["+e+"].components["+n+"].code_show",!1),o.$set("groups["+e+"].components["+n+"].type",t.components[n].type?t.components[n].type:"standard"),o.$set("groups["+e+"].components["+n+"].width",t.components[n].width?t.components[n].width:"full"),o.$set("groups["+e+"].components["+n+"].html",""),o.$set("groups["+e+"].components["+n+"].description",""),o.loadComponent(o.groups[e].components[n])}},loadGroup:function(o){var e=this,t="./components/"+o.name;e.$http.get(t+"/description.md?cb="+new Date).then(function(t){o.description=marked(t.data),e.areGroupsLoaded()},function(){e.logError("Description file for <strong>"+o.name+"</strong> group failed to load from <code>"+t+"/description.md</code>")})},loadComponent:function(o){var e=this,t="./components/"+o.group+"/"+o.name;e.$http.get(t+"/markup.html?cb="+new Date).then(function(t){o.html=t.data,e.areComponentsLoaded()},function(){e.logError("HTML file for <strong>"+o.name+"</strong> component failed to load from <code>"+t+"/html.md</code>")}),e.$http.get(t+"/description.md?cb="+new Date).then(function(t){o.description=marked(t.data),e.areComponentsLoaded()},function(){e.logError("Description file for <strong>"+o.name+"</strong> component failed to load from <code>"+t+"/description.md</code>")})},areGroupsLoaded:function(){var o=this;o.groups_loaded_count+=1,o.groups_loaded_count===o.groups_count&&setTimeout(function(){o.groups_loaded=!0},1e3)},areComponentsLoaded:function(){var o=this;o.components_loaded_count+=1,o.components_loaded_count===2*o.components_count&&setTimeout(function(){o.loaded=!0},2e3)},addLog:function(o,e,t){var n=this;t="undefined"!=typeof t?t:"error",e="undefined"!=typeof e?e:null,n.log[t].push(o),console[t]("[Pattern Library warn]: "+o),e&&console[t](e)},logError:function(o,e){var t=this;t.addLog(o,e,"error")},logInfo:function(o,e){var t=this;t.addLog(o,e,"info")},setScrollPosition:function(){var o=this,e=document.documentElement,t=e&&e.scrollTop||document.body.scrollTop;o.prev_scroll_position=o.scroll_position,o.scroll_position=t},getScrollDirection:function(){var o=this;return o.prev_scroll_position<o.scroll_position?"down":"up"},scrollToHref:function(o){var e=this;e.scrollTo(o.target.hash),e.active_page=null},scrollTo:function(o){var e=this,t=e.mobile_view?79:30;o&&(e.scrolling_to=!0,smoothScroll.animateScroll(o,null,{offset:t,callback:function(){e.scrolling_to=!1,e.open_nav=!1}}))},toggleNav:function(){var o=this;o.open_nav=!o.open_nav},toggleOpenGroups:function(o){var e=this;e.open_group=e.open_group==o.id?null:o.id,e.active_page=null},loadPage:function(o){var e=this;e.active_page=o,e.active_components=[],e.open_group=null,e.open_nav=!1,e.$http.get(o.file).then(function(o){e.$set("active_page.markup",marked(o.data))}),e.updateHash(o.name)},resizeFadeToggle:function(){var o=this;o.resizing=!0,o.$broadcast("resizing",!0),new Date-o.rtime<o.delta?setTimeout(o.resizeFadeToggle,o.delta):(o.timeout=!1,setTimeout(function(){o.resizing=!1,o.$broadcast("resizing",!1)},1e3))},convertHexToRgb:function(o){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;o=o.replace(e,function(o,e,t,n){return e+e+t+t+n+n});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},getColorBrightness:function(o){return Math.round((299*parseInt(o.r)+587*parseInt(o.g)+114*parseInt(o.b))/1e3)}}});